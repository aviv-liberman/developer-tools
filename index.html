<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Diff Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/jsondiffpatch@0.4.1/dist/jsondiffpatch.umd.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsondiffpatch@0.4.1/dist/formatters-styles/html.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Hide unchanged elements when toggle is active */
        .show-only-diffs .jsondiffpatch-unchanged {
            display: none !important;
        }
    </style>
</head>
<body class="m-0 p-5 font-sans bg-gray-100">
    <div class="max-w-6xl mx-auto bg-white p-5 rounded-lg shadow-lg">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Developer Tools</h1>
        <p class="text-gray-600 mb-8">Essential tools for developers - JSON comparison and text case conversion.</p>
        
        <!-- Tab Navigation -->
        <div class="mb-8">
            <div class="border-b border-gray-200">
                <nav class="-mb-px flex space-x-8">
                    <button id="json-tab" class="tab-button py-2 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600" onclick="switchTab('json')">
                        JSON Diff Tool
                    </button>
                    <button id="case-tab" class="tab-button py-2 px-1 border-b-2 font-medium text-sm hover:text-gray-700 border-transparent text-gray-500" onclick="switchTab('case')">
                        Text Case Converter
                    </button>
                    <button id="url-tab" class="tab-button py-2 px-1 border-b-2 font-medium text-sm hover:text-gray-700 border-transparent text-gray-500" onclick="switchTab('url')">
                        URL Breakdown
                    </button>
                </nav>
            </div>
        </div>
        
        <!-- JSON Diff Tool Tab -->
        <div id="json-tool" class="tab-content" style="display: block;">
        
        <!-- Input Method Selection -->
        <div class="mb-8">
            <label for="input-method" class="block text-sm font-medium text-gray-700 mb-2">Choose Input Method:</label>
            <select id="input-method" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="toggleInputMethod()">
                <option value="paste">Paste JSON Content</option>
                <option value="files">Load JSON Files</option>
            </select>
        </div>

        <!-- File Upload Section -->
        <div id="file-upload-section" class="mb-8" style="display: none;">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Upload JSON Files</h2>
            <div class="flex gap-5 mb-8 flex-wrap">
                <div class="flex-1 min-w-80 p-5 border-2 border-dashed border-gray-300 rounded-lg text-center bg-gray-50 transition-colors duration-300 hover:border-blue-500" id="file1-upload">
                    <label for="file1" class="cursor-pointer text-blue-600 font-bold hover:text-blue-800">
                        Choose First JSON File<br>
                        <small class="text-gray-500">or drag and drop here</small>
                    </label>
                    <input type="file" id="file1" accept=".json" onchange="handleFileSelect(this, 'file1')" class="hidden">
                    <div class="mt-2 text-sm text-gray-600" id="file1-info"></div>
                </div>
                
                <div class="flex-1 min-w-80 p-5 border-2 border-dashed border-gray-300 rounded-lg text-center bg-gray-50 transition-colors duration-300 hover:border-blue-500" id="file2-upload">
                    <label for="file2" class="cursor-pointer text-blue-600 font-bold hover:text-blue-800">
                        Choose Second JSON File<br>
                        <small class="text-gray-500">or drag and drop here</small>
                    </label>
                    <input type="file" id="file2" accept=".json" onchange="handleFileSelect(this, 'file2')" class="hidden">
                    <div class="mt-2 text-sm text-gray-600" id="file2-info"></div>
                </div>
            </div>
        </div>

        <!-- JSON Paste Section -->
        <div id="json-paste-section" class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Paste JSON Content</h2>
            <div class="flex gap-5 mb-4 flex-wrap">
                <div class="flex-1 min-w-80">
                    <label for="json1" class="block text-sm font-medium text-gray-700 mb-2">First JSON:</label>
                    <textarea 
                        id="json1" 
                        placeholder="Paste your first JSON here..."
                        class="w-full h-40 p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        onchange="handleJsonPaste('json1')"
                        onpaste="handleJsonPaste('json1')"
                    ></textarea>
                    <div class="mt-2 text-sm text-gray-600" id="json1-info"></div>
                </div>
                
                <div class="flex-1 min-w-80">
                    <label for="json2" class="block text-sm font-medium text-gray-700 mb-2">Second JSON:</label>
                    <textarea 
                        id="json2" 
                        placeholder="Paste your second JSON here..."
                        class="w-full h-40 p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        onchange="handleJsonPaste('json2')"
                        onpaste="handleJsonPaste('json2')"
                    ></textarea>
                    <div class="mt-2 text-sm text-gray-600" id="json2-info"></div>
                </div>
            </div>
        </div>
        
        <button class="w-full py-4 bg-blue-600 text-white border-none rounded-lg text-base font-bold cursor-pointer my-5 transition-colors duration-300 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed" id="compare-btn" onclick="compareFiles()" disabled>
            Compare JSON Files
        </button>
        
        <div id="message-container"></div>
        <button class="bg-gray-600 text-white border-none py-2 px-5 rounded cursor-pointer my-2 text-sm hover:bg-gray-700 active:bg-blue-600" id="toggle-btn" onclick="toggleDiffView()" style="display: none;">
            Show Only Differences
        </button>
        <div id="diff-container"></div>
        </div>
        
        <!-- Text Case Converter Tab -->
        <div id="case-tool" class="tab-content" style="display: none;">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Text Case Converter</h2>
            <p class="text-gray-600 mb-6">Convert your text to different case formats. Click on any result to copy to clipboard.</p>
            
            <div class="mb-6">
                <label for="case-input" class="block text-sm font-medium text-gray-700 mb-2">Enter your text:</label>
                <textarea id="case-input" placeholder="Type or paste your text here..." class="w-full h-32 p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="convertCases()"></textarea>
            </div>
            
            <div id="case-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="col-span-full text-center text-gray-500 italic">Enter some text to see case conversions</div>
            </div>
        </div>

        <!-- URL Breakdown Tab -->
        <div id="url-tool" class="tab-content" style="display: none;">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">URL Breakdown</h2>
            <p class="text-gray-600 mb-6">Analyze and breakdown a URL into its components.</p>
            
                         <div class="mb-6">
                 <label for="url-input" class="block text-sm font-medium text-gray-700 mb-2">Enter a URL:</label>
                 <input type="url" id="url-input" placeholder="https://example.com/path/to/resource?query=value#fragment" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="breakdownURL()" onpaste="breakdownURL()">
                 <button onclick="breakdownURL()" class="mt-3 bg-blue-600 text-white border-none py-2 px-5 rounded cursor-pointer text-sm hover:bg-blue-700 active:bg-blue-800">
                     Breakdown URL
                 </button>
             </div>

            <div id="url-results" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h3 class="text-lg font-medium text-gray-700 mb-2">Protocol</h3>
                    <p id="protocol-result" class="text-gray-900 font-mono text-sm break-all"></p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h3 class="text-lg font-medium text-gray-700 mb-2">Host</h3>
                    <p id="host-result" class="text-gray-900 font-mono text-sm break-all"></p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h3 class="text-lg font-medium text-gray-700 mb-2">Path</h3>
                    <p id="path-result" class="text-gray-900 font-mono text-sm break-all"></p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h3 class="text-lg font-medium text-gray-700 mb-2">Query Parameters</h3>
                    <p id="query-result" class="text-gray-900 font-mono text-sm break-all"></p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h3 class="text-lg font-medium text-gray-700 mb-2">Fragment</h3>
                    <p id="fragment-result" class="text-gray-900 font-mono text-sm break-all"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let file1Data = null;
        let file2Data = null;
        let json1Data = null;
        let json2Data = null;
        let isShowingOnlyDiffs = false;
        let currentInputMethod = 'paste';

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.style.display = 'none';
            });
            
            // Remove active state from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('border-blue-500', 'text-blue-600');
                button.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab content
            const selectedContent = document.getElementById(tabName + '-tool');
            if (selectedContent) {
                selectedContent.style.display = 'block';
            }
            
            // Activate selected tab button
            const selectedButton = document.getElementById(tabName + '-tab');
            if (selectedButton) {
                selectedButton.classList.remove('border-transparent', 'text-gray-500');
                selectedButton.classList.add('border-blue-500', 'text-blue-600');
            }
        }

        // Case conversion functionality
        function convertCases() {
            const input = document.getElementById('case-input').value;
            const resultsContainer = document.getElementById('case-results');
            
            if (!input.trim()) {
                resultsContainer.innerHTML = '<div class="col-span-full text-center text-gray-500 italic">Enter some text to see case conversions</div>';
                return;
            }
            
            const cases = [
                { name: 'camelCase', convert: toCamelCase },
                { name: 'PascalCase', convert: toPascalCase },
                { name: 'snake_case', convert: toSnakeCase },
                { name: 'kebab-case', convert: toKebabCase },
                { name: 'UPPER_SNAKE_CASE', convert: toUpperSnakeCase },
                { name: 'UPPER CASE', convert: toUpperCase },
                { name: 'lower case', convert: toLowerCase },
                { name: 'Title Case', convert: toTitleCase },
                { name: 'Sentence case', convert: toSentenceCase },
                { name: 'dot.case', convert: toDotCase },
                { name: 'path/case', convert: toPathCase },
                { name: 'Header-Case', convert: toHeaderCase },
                { name: 'no case', convert: toNoCase },
                { name: 'swap case', convert: toSwapCase }
            ];
            
            const resultsHTML = cases.map(caseType => {
                try {
                    const converted = caseType.convert(input);
                    return `
                        <div class="bg-gray-50 p-4 rounded-lg border hover:border-blue-300 transition-colors cursor-pointer" 
                             onclick="copyToClipboard('${converted.replace(/'/g, "\\'")}', '${caseType.name}')">
                            <div class="text-sm font-medium text-gray-700 mb-2">${caseType.name}</div>
                            <div class="text-gray-900 font-mono text-sm break-all">${converted}</div>
                            <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                        </div>
                    `;
                } catch (error) {
                    return `
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                            <div class="text-sm font-medium text-red-700 mb-2">${caseType.name}</div>
                            <div class="text-red-600 text-sm">Error: ${error.message}</div>
                        </div>
                    `;
                }
            }).join('');
            
            resultsContainer.innerHTML = resultsHTML;
        }

        // Robust case conversion functions that work with any input case
        function splitIntoWords(str) {
            // Handle various separators and case changes
            return str
                .replace(/([a-z])([A-Z])/g, '$1 $2') // camelCase -> camel Case
                .replace(/([A-Z])([A-Z][a-z])/g, '$1 $2') // HTML -> H TML
                .replace(/[_\-\s]+/g, ' ') // Replace separators with spaces
                .trim()
                .split(/\s+/)
                .filter(word => word.length > 0);
        }

        function toCamelCase(str) {
            const words = splitIntoWords(str);
            return words.map((word, index) => {
                const lower = word.toLowerCase();
                return index === 0 ? lower : lower.charAt(0).toUpperCase() + lower.slice(1);
            }).join('');
        }

        function toPascalCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => {
                const lower = word.toLowerCase();
                return lower.charAt(0).toUpperCase() + lower.slice(1);
            }).join('');
        }

        function toSnakeCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => word.toLowerCase()).join('_');
        }

        function toKebabCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => word.toLowerCase()).join('-');
        }

        function toUpperSnakeCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => word.toUpperCase()).join('_');
        }

        function toUpperCase(str) {
            return str.toUpperCase();
        }

        function toLowerCase(str) {
            return str.toLowerCase();
        }

        function toTitleCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => {
                const lower = word.toLowerCase();
                return lower.charAt(0).toUpperCase() + lower.slice(1);
            }).join(' ');
        }

        function toSentenceCase(str) {
            const words = splitIntoWords(str);
            if (words.length === 0) return str;
            
            return words.map((word, index) => {
                const lower = word.toLowerCase();
                if (index === 0) {
                    return lower.charAt(0).toUpperCase() + lower.slice(1);
                }
                return lower;
            }).join(' ');
        }

        function toDotCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => word.toLowerCase()).join('.');
        }

        function toPathCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => word.toLowerCase()).join('/');
        }

        function toHeaderCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => {
                const lower = word.toLowerCase();
                return lower.charAt(0).toUpperCase() + lower.slice(1);
            }).join('-');
        }

        function toNoCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => word.toLowerCase()).join(' ');
        }

        function toSwapCase(str) {
            return str.split('').map(char => {
                if (char === char.toUpperCase()) {
                    return char.toLowerCase();
                } else {
                    return char.toUpperCase();
                }
            }).join('');
        }

        // Copy to clipboard functionality
        function copyToClipboard(text, caseType) {
            navigator.clipboard.writeText(text).then(() => {
                showMessage(`"${caseType}" copied to clipboard!`, 'success');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showMessage('Failed to copy to clipboard', 'error');
            });
        }

        // Toggle input method
        function toggleInputMethod() {
            const method = document.getElementById('input-method').value;
            const fileSection = document.getElementById('file-upload-section');
            const pasteSection = document.getElementById('json-paste-section');
            
            currentInputMethod = method;
            
            if (method === 'files') {
                fileSection.style.display = 'block';
                pasteSection.style.display = 'none';
                // Clear paste data when switching to files
                json1Data = null;
                json2Data = null;
                document.getElementById('json1').value = '';
                document.getElementById('json2').value = '';
                document.getElementById('json1-info').innerHTML = '';
                document.getElementById('json2-info').innerHTML = '';
            } else {
                fileSection.style.display = 'none';
                pasteSection.style.display = 'block';
                // Clear file data when switching to paste
                file1Data = null;
                file2Data = null;
                document.getElementById('file1').value = '';
                document.getElementById('file2').value = '';
                document.getElementById('file1-info').innerHTML = '';
                document.getElementById('file2-info').innerHTML = '';
            }
            
            updateCompareButton();
        }

        // File selection handler
        function handleFileSelect(input, fileId) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const jsonData = JSON.parse(e.target.result);
                        if (fileId === 'file1') {
                            file1Data = jsonData;
                        } else {
                            file2Data = jsonData;
                        }
                        
                        // Update file info
                        document.getElementById(`${fileId}-info`).innerHTML = 
                            `<strong>${file.name}</strong><br>Size: ${(file.size / 1024).toFixed(1)} KB`;
                        
                        updateCompareButton();
                    } catch (error) {
                        showMessage(`Error parsing ${file.name}: ${error.message}`, 'error');
                        document.getElementById(`${fileId}-info`).innerHTML = '';
                        if (fileId === 'file1') {
                            file1Data = null;
                        } else {
                            file2Data = null;
                        }
                        updateCompareButton();
                    }
                };
                reader.readAsText(file);
            }
        }

        // JSON paste handler
        function handleJsonPaste(textareaId) {
            const textarea = document.getElementById(textareaId);
            const content = textarea.value.trim();
            
            if (!content) {
                if (textareaId === 'json1') {
                    json1Data = null;
                    document.getElementById('json1-info').innerHTML = '';
                } else {
                    json2Data = null;
                    document.getElementById('json2-info').innerHTML = '';
                }
                updateCompareButton();
                return;
            }
            
            try {
                const jsonData = JSON.parse(content);
                if (textareaId === 'json1') {
                    json1Data = jsonData;
                    document.getElementById('json1-info').innerHTML = '<span class="text-green-600">✓ Valid JSON</span>';
                } else {
                    json2Data = jsonData;
                    document.getElementById('json2-info').innerHTML = '<span class="text-green-600">✓ Valid JSON</span>';
                }
                updateCompareButton();
            } catch (error) {
                if (textareaId === 'json1') {
                    json1Data = null;
                    document.getElementById('json1-info').innerHTML = `<span class="text-red-600">✗ Invalid JSON: ${error.message}</span>`;
                } else {
                    json2Data = null;
                    document.getElementById('json2-info').innerHTML = `<span class="text-red-600">✗ Invalid JSON: ${error.message}</span>`;
                }
                updateCompareButton();
            }
        }

        // Update compare button state
        function updateCompareButton() {
            const compareBtn = document.getElementById('compare-btn');
            let hasFirstData, hasSecondData;
            
            if (currentInputMethod === 'files') {
                hasFirstData = file1Data;
                hasSecondData = file2Data;
            } else {
                hasFirstData = json1Data;
                hasSecondData = json2Data;
            }
            
            compareBtn.disabled = !(hasFirstData && hasSecondData);
        }

        // Drag and drop functionality
        function setupDragAndDrop() {
            const uploads = document.querySelectorAll('#file1-upload, #file2-upload');
            
            uploads.forEach(upload => {
                upload.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    upload.classList.add('border-blue-500', 'bg-blue-50');
                });
                
                upload.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    upload.classList.remove('border-blue-500', 'bg-blue-50');
                });
                
                upload.addEventListener('drop', (e) => {
                    e.preventDefault();
                    upload.classList.remove('border-blue-500', 'bg-blue-50');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        const file = files[0];
                        if (file.type === 'application/json' || file.name.endsWith('.json')) {
                            const fileId = upload.id.replace('-upload', '');
                            const input = document.getElementById(fileId);
                            
                            // Create a new FileList-like object
                            const dataTransfer = new DataTransfer();
                            dataTransfer.items.add(file);
                            input.files = dataTransfer.files;
                            
                            handleFileSelect(input, fileId);
                        } else {
                            showMessage('Please select a JSON file', 'error');
                        }
                    }
                });
            });
        }

        // Show message
        function showMessage(message, type = 'info') {
            const container = document.getElementById('message-container');
            let bgColor, textColor;
            
            switch(type) {
                case 'error':
                    bgColor = 'bg-red-100';
                    textColor = 'text-red-800';
                    break;
                case 'success':
                    bgColor = 'bg-green-100';
                    textColor = 'text-green-800';
                    break;
                default:
                    bgColor = 'bg-blue-100';
                    textColor = 'text-blue-800';
            }
            
            container.innerHTML = `<div class="${bgColor} ${textColor} text-center p-5 rounded my-2">${message}</div>`;
        }

        // Clear message
        function clearMessage() {
            document.getElementById('message-container').innerHTML = '';
        }

        // Toggle diff view
        function toggleDiffView() {
            const toggleBtn = document.getElementById('toggle-btn');
            const diffContainer = document.getElementById('diff-container');
            
            isShowingOnlyDiffs = !isShowingOnlyDiffs;
            
            if (isShowingOnlyDiffs) {
                diffContainer.classList.add('show-only-diffs');
                toggleBtn.textContent = 'Show All';
                toggleBtn.classList.add('bg-blue-600');
            } else {
                diffContainer.classList.remove('show-only-diffs');
                toggleBtn.textContent = 'Show Only Differences';
                toggleBtn.classList.remove('bg-blue-600');
            }
        }

        // Compare files
        function compareFiles() {
            let firstData, secondData;
            
            if (currentInputMethod === 'files') {
                firstData = file1Data;
                secondData = file2Data;
            } else {
                firstData = json1Data;
                secondData = json2Data;
            }
            
            if (!firstData || !secondData) {
                const methodText = currentInputMethod === 'files' ? 'upload JSON files' : 'paste JSON content';
                showMessage(`Please ${methodText}`, 'error');
                return;
            }

            clearMessage();
            
            try {
                // Wait for jsondiffpatch to be available
                if (typeof window.jsondiffpatch === 'undefined') {
                    throw new Error('jsondiffpatch library not loaded');
                }

                // Generate diff using jsondiffpatch
                const instance = jsondiffpatch.create();
                const delta = instance.diff(firstData, secondData);
                
                const diffContainer = document.getElementById('diff-container');
                const toggleBtn = document.getElementById('toggle-btn');
                
                // Display the diff using jsondiffpatch's HTML formatter
                if (delta) {
                    const formattersHtml = jsondiffpatch.formatters.html;
                    const html = formattersHtml.format(delta, firstData);
                    diffContainer.innerHTML = html;
                    
                    // Show toggle button
                    toggleBtn.style.display = 'inline-block';
                    
                    // Reset toggle state
                    isShowingOnlyDiffs = false;
                    diffContainer.classList.remove('show-only-diffs');
                    toggleBtn.textContent = 'Show Only Differences';
                    toggleBtn.classList.remove('bg-blue-600');
                    
                    showMessage('Differences found and displayed below', 'success');
                } else {
                    diffContainer.innerHTML = '<div class="text-center p-10 text-gray-600 italic">No differences found between the JSON files</div>';
                    toggleBtn.style.display = 'none';
                    showMessage('No differences found between the JSON files', 'success');
                }
            } catch (error) {
                console.error('Error:', error);
                showMessage(`Error comparing files: ${error.message}`, 'error');
                document.getElementById('diff-container').innerHTML = '';
                document.getElementById('toggle-btn').style.display = 'none';
            }
        }

        // URL Breakdown functionality
        function breakdownURL() {
            const urlInput = document.getElementById('url-input').value;
            const resultsContainer = document.getElementById('url-results');
            
            if (!urlInput.trim()) {
                resultsContainer.innerHTML = '<div class="col-span-full text-center text-gray-500 italic">Enter a URL to breakdown</div>';
                return;
            }

            try {
                // Add protocol if missing
                let processedUrl = urlInput;
                if (!urlInput.match(/^https?:\/\//)) {
                    processedUrl = 'https://' + urlInput;
                }
                
                const url = new URL(processedUrl);
                
                
                // Build results HTML
                let resultsHTML = '';
                
                // Protocol
                resultsHTML += `
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-medium text-gray-700 mb-2">Protocol</h3>
                        <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.protocol.replace(':', '')}', 'Protocol')">${url.protocol.replace(':', '')}</p>
                        <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                    </div>
                `;
                
                // Username and Password (if exists)
                if (url.username || url.password) {
                    if (url.username) {
                        resultsHTML += `
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <h3 class="text-lg font-medium text-gray-700 mb-2">Username</h3>
                                <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.username}', 'Username')">${url.username}</p>
                                <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                            </div>
                        `;
                    }
                    if (url.password) {
                        resultsHTML += `
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <h3 class="text-lg font-medium text-gray-700 mb-2">Password</h3>
                                <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.password}', 'Password')">${url.password}</p>
                                <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                            </div>
                        `;
                    }
                }
                
                // Hostname
                resultsHTML += `
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-medium text-gray-700 mb-2">Hostname</h3>
                        <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.hostname}', 'Hostname')">${url.hostname}</p>
                        <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                    </div>
                `;
                
                // Origin (protocol + hostname + port)
                resultsHTML += `
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-medium text-gray-700 mb-2">Origin</h3>
                        <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.origin}', 'Origin')">${url.origin}</p>
                        <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                    </div>
                `;
                
                // Port (if exists)
                if (url.port) {
                    resultsHTML += `
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-medium text-gray-700 mb-2">Port</h3>
                            <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.port}', 'Port')">${url.port}</p>
                            <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                        </div>
                    `;
                }
                
                // Pathname
                resultsHTML += `
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <h3 class="text-lg font-medium text-gray-700 mb-2">Path</h3>
                        <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.pathname || '/'}', 'Path')">${url.pathname || '/'}</p>
                        <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                    </div>
                `;
                
                // Query Parameters
                if (url.search) {
                    const searchParams = new URLSearchParams(url.search);
                    let queryHTML = '';
                    searchParams.forEach((value, key) => {
                        queryHTML += `
                            <div class="bg-white p-4 rounded-lg border-2 border-blue-200 hover:border-blue-400 hover:shadow-md transition-all duration-200">
                                <div class="flex items-center justify-between">
                                    <div class="flex-1">
                                        <div class="flex items-center mb-2">
                                            <span class="font-bold text-blue-800 text-xl">${key}</span>
                                            <span class="text-gray-400 mx-3 text-lg">:</span>
                                        </div>
                                        <div class="bg-gray-50 p-3 rounded border border-gray-200">
                                            <span class="text-gray-800 font-mono text-base break-all cursor-pointer hover:text-blue-600 transition-colors" onclick="copyToClipboard('${value}', 'Query Value: ${key}')">${value}</span>
                                        </div>
                                    </div>
                                    <div class="ml-4 flex flex-col gap-2">
                                        <button onclick="copyToClipboard('${key}', 'Query Key: ${key}')" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded text-sm font-medium transition-colors">
                                            Copy Key
                                        </button>
                                        <button onclick="copyToClipboard('${value}', 'Query Value: ${key}')" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-2 rounded text-sm font-medium transition-colors">
                                            Copy Value
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    
                    resultsHTML += `
                        <div class="col-span-full bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border-2 border-blue-300 shadow-md">
                            <h3 class="text-2xl font-bold text-blue-900 mb-4 flex items-center">
                                <svg class="w-7 h-7 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                                Query Parameters (${searchParams.size})
                            </h3>
                            
                            <!-- Raw Query String -->
                            <div class="bg-white p-4 rounded border border-blue-200 mb-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-blue-700">Raw Query String:</span>
                                    <button onclick="copyToClipboard('${url.search}', 'Raw Query String')" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded text-xs font-medium transition-colors">
                                        Copy Raw
                                    </button>
                                </div>
                                <p class="text-gray-800 font-mono text-sm break-all bg-gray-50 p-2 rounded">${url.search}</p>
                            </div>
                            
                            <!-- Individual Parameters -->
                            <div class="space-y-3">${queryHTML}</div>
                        </div>
                    `;
                } else {
                    resultsHTML += `
                        <div class="col-span-full bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-medium text-gray-700 mb-2">Query Parameters</h3>
                            <p class="text-gray-500 italic">None</p>
                         </div>
                    `;
                }
                
                // Fragment
                if (url.hash) {
                    resultsHTML += `
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-medium text-gray-700 mb-2">Fragment</h3>
                            <p class="text-gray-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.hash.replace('#', '')}', 'Fragment')">${url.hash.replace('#', '')}</p>
                            <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                        </div>
                    `;
                } else {
                    resultsHTML += `
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-medium text-gray-700 mb-2">Fragment</h3>
                            <p class="text-gray-500 italic">None</p>
                        </div>
                    `;
                }
                
                // Full URL
                resultsHTML += `
                    <div class="col-span-full bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <h3 class="text-lg font-medium text-blue-700 mb-2">Full URL</h3>
                        <p class="text-blue-900 font-mono text-sm break-all cursor-pointer" onclick="copyToClipboard('${url.href}', 'Full URL')">${url.href}</p>
                        <div class="text-xs text-blue-600 mt-2">Click to copy</div>
                    </div>
                `;
                
                
                resultsContainer.innerHTML = resultsHTML;
                showMessage('URL breakdown complete!', 'success');
            } catch (error) {
                showMessage(`Invalid URL: ${error.message}`, 'error');
                resultsContainer.innerHTML = '<div class="col-span-full text-center text-red-500 italic">Invalid URL format</div>';
            }
        }

        // Initialize the app
        window.addEventListener('load', () => {
            setupDragAndDrop();
            // Initialize case converter with empty state
            convertCases();
            // Initialize URL breakdown with empty state
            breakdownURL();
        });
    </script>
</body>
</html>